{"version":3,"sources":["../src/index.js"],"names":["AIRTABLE_API_KEY","use","dialog","session","send","beginDialog","results","endConversation","Prompts","choice","response","index","endDialog","replaceDialog","reloadAction","matches","get","then","record","fields","Borough","directionMessage","msg","Brooklyn","name","Name","directions","Directions","address","Address","borough","phone","Phone","services","Services"],"mappings":"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","file":"index.js","sourcesContent":["/*-----------------------------------------------------------------------------\nHelpHer bot connects humans in need to resources\n-----------------------------------------------------------------------------*/\n\nimport axios from 'axios';\nimport bot from './bot';\nimport builder from 'botbuilder';\nimport filter from 'lodash/fp/filter';\nimport forEach from 'lodash/fp/forEach';\nimport get from 'lodash/fp/get';\nimport map from 'lodash/fp/map';\nimport showSessionStackTrace from './showSessionStackTrace';\n\nconst AIRTABLE_API_KEY = `keyNJRjM1plBmeRh4`;\n\n\nbot.use(showSessionStackTrace);\n\nbot.dialog(`/`, [\n  session => {\n    session.send(`Hey, I'm Annie bot. If you need some help, I've got it. I can give you info about places to stay, free healthcare, food, and safe houses. I can also connect you to someone who can help.`);\n    session.beginDialog(`/menu`);\n  },\n  (session, results) => {\n    session.endConversation(`Goodbye until next time...`);\n  },\n]);\n\nbot.dialog(`/menu`, [\n  session => {\n    builder.Prompts.choice(session, `What city are you in, love?`, `New York City |Los Angeles|Chicago`);\n  },\n  (session, results) => {\n    switch (results.response.index) {\n      case 0:\n        session.beginDialog(`/newYork`);\n        break;\n      case 1:\n        session.beginDialog(`/losAngeles`);\n        break;\n      case 2:\n        session.beginDialog(`/chicago`);\n        break;\n      default:\n        session.endDialog();\n        break;\n    }\n  },\n  session => {\n        // Reload menu\n    session.replaceDialog(`/menu`);\n  },\n]).reloadAction(`showMenu`, null, { matches: /^(menu|back)/i });\n// NYC Services Menu\n\nbot.dialog(`/newYork`, [\n  session => {\n    builder.Prompts.choice(session, `Love NYC. What borough are you currently in?`, `Brooklyn |Bronx |Manhattan |Queens |Staten Island`);\n  },\n  (session, results) => {\n    switch (results.response.index) {\n      case 0:\n        session.beginDialog(`/newYork/bk`);\n        break;\n      case 1:\n        session.beginDialog(`/newYork/bx`);\n        break;\n      case 2:\n        session.beginDialog(`/newYork/man`);\n        break;\n      case 3:\n        session.beginDialog(`/newYork/qns`);\n        break;\n      case 4:\n        session.beginDialog(`/newYork/si`);\n        break;\n      default:\n        session.endDialog();\n        break;\n    }\n  },\n  session => {\n      // Reload menu\n    session.replaceDialog(`/menu`);\n  },\n]).reloadAction(`showMenu`, null, { matches: /^(menu|back)/i });\n\n// NYC Boroughs\n\n// Brooklyn\nbot.dialog(`/newYork/bk`, [\n  session => {\n    builder.Prompts.choice(session, `Cool, BK. And how can I help you? Right now, I can help with the following:`, `Healthcare|Shelter|Counseling/Safe Spaces|Childcare`);\n  },\n  (session, results) => {\n    switch (results.response.index) {\n      case 0:\n        session.beginDialog(`/newYork/bk/healthcare`);\n        break;\n      case 1:\n        session.beginDialog(`/newYork/bk/shelter`);\n        break;\n      case 2:\n        session.beginDialog(`/newYork/bk/counseling`);\n        break;\n      case 3:\n        session.beginDialog(`/newYork/bk/childcare`);\n        break;\n      default:\n        session.endDialog();\n        break;\n    }\n  },\n  session => {\n      // Reload menu\n    session.replaceDialog(`/menu`);\n  },\n]).reloadAction(`showMenu`, null, { matches: /^(menu|back)/i });\n\n// Brooklyn Healthcare\nbot.dialog(`/newYork/bk/healthcare`, [\n  session => {\n    axios.get(`https://api.airtable.com/v0/app9xzJDMtX5XYjWJ/Health?api_key=keyNJRjM1plBmeRh4`)\n      .then(get(`data.records`))\n      .then(filter(record => record.fields.Borough === `Brooklyn`))\n      .then(map(directionMessage))\n      .then(forEach(msg => session.send(msg)));\n  },\n]);\n\n// Brooklyn Shelter\nbot.dialog(`/newYork/bk/shelter`, [\n  session => {\n    axios.get(`https://api.airtable.com/v0/app9xzJDMtX5XYjWJ/Shelter?api_key=keyNJRjM1plBmeRh4`)\n      .then(get(`data.records`))\n      .then(filter(record => record.fields.Borough === `Brooklyn`))\n      .then(map(directionMessage))\n      .then(forEach(msg => session.send(msg)));\n  },\n]);\n\n// Brooklyn Counseling\nbot.dialog(`/newYork/bk/couseling`, [\n  session => {\n    axios.get(`https://api.airtable.com/v0/app9xzJDMtX5XYjWJ/Counseling?api_key=keyNJRjM1plBmeRh4`)\n      .then(get(`data.records`))\n      .then(filter(record => record.fields.Brooklyn === `Y`))\n      .then(map(directionMessage))\n      .then(forEach(msg => session.send(msg)));\n  },\n]);\n\n// Brooklyn Childcare\nbot.dialog(`/newYork/bk/childcare`, [\n  session => {\n    builder.Prompts.choice(session, `Childcare, I know all about where to get that kind of help. What type of care do you need help with?`, `After School|Daycare|Family Help| Supplies`);\n  },\n  (session, results) => {\n    switch (results.response.index) {\n      case 0:\n        session.beginDialog(`/newYork/bk/childcare/afterschool`);\n        break;\n      case 1:\n        session.beginDialog(`/newYork/bk/childcare/daycare`);\n        break;\n      case 2:\n        session.beginDialog(`/newYork/bk/childcare/family`);\n        break;\n      case 3:\n        session.beginDialog(`/newYork/bk/childcare/supplies`);\n        break;\n      default:\n        session.endDialog();\n        break;\n    }\n  },\n  session => {\n      // Reload menu\n    session.replaceDialog(`/menu`);\n  },\n]).reloadAction(`showMenu`, null, { matches: /^(menu|back)/i });\n\nbot.dialog(`/newYork/bk/childcare/afterschool`, [\n  session => {\n    axios.get(`https://api.airtable.com/v0/app9xzJDMtX5XYjWJ/Childcare?api_key=keyNJRjM1plBmeRh4`)\n      .then(get(`data.records`))\n      .then(filter(record => record.fields.Borough === `Brooklyn`))\n      .then(map(directionMessage))\n      .then(forEach(msg => session.send(msg)));\n  },\n]);\n\n// Bronx\nbot.dialog(`/newYork/bx`, [\n  session => {\n    builder.Prompts.choice(session, `Cool, the Bronx. And how can I help you? Right now, I can help with the following:`, `Healthcare|Shelter|Counseling|Childcare`);\n  },\n  (session, results) => {\n    switch (results.response.index) {\n      case 0:\n        session.beginDialog(`/newYork/bx/healthcare`);\n        break;\n      case 1:\n        session.beginDialog(`/newYork/bx/shelter`);\n        break;\n      case 2:\n        session.beginDialog(`/newYork/bx/counseling`);\n        break;\n      case 3:\n        session.beginDialog(`/newYork/bx/childcare`);\n        break;\n      default:\n        session.endDialog();\n        break;\n    }\n  },\n  session => {\n      // Reload menu\n    session.replaceDialog(`/menu`);\n  },\n]).reloadAction(`showMenu`, null, { matches: /^(menu|back)/i });\n\n// Bronx Healthcare\nbot.dialog(`/newYork/bx/healthcare`, [\n  session => {\n    builder.Prompts.choice(session, `What kind of care do you need?`, `I'm sick. | I'm due for a check-up. | I have an illness (diabetes, HIV). | I need sexual health services.`);\n  },\n  (session, results) => {\n    switch (results.response.index) {\n      case 0:\n        session.beginDialog(`/newYork/bx/healthcare/sickvisit`);\n        break;\n      case 1:\n        session.beginDialog(`/newYork/bx/healthcare/checkup`);\n        break;\n      case 2:\n        session.beginDialog(`/newYork/bx/healthcare/illness`);\n        break;\n      case 3:\n        session.beginDialog(`/newYork/bx/healthcare/sexual`);\n        break;\n      default:\n        session.endDialog();\n        break;\n    }\n  },\n  session => {\n      // Reload menu\n    session.replaceDialog(`/menu`);\n  },\n]).reloadAction(`showMenu`, null, { matches: /^(menu|back)/i });\n\n\n// Los Angeles\nbot.dialog(`/losAngeles`, [\n  session => {\n    session.send(`Hey, I love LA. I just don't have any info about it yet. Check back soon and I'll let you know.`);\n  },\n]);\n\n\n// Chicago\nbot.dialog(`/chicago`, [\n  session => {\n    session.send(`Hey, I love CHI. I just don't have any info about it yet. Check back soon and I'll let you know.`);\n  },\n]);\n\nfunction directionMessage({ fields: { Name: name, Directions: directions, Address: address, Borough: borough, Phone: phone, Services: services } }) {\n  return `You can get to ${name} at ${address} by taking the ${directions} They can assist with ${services}. If you need more info, you can call ${phone}.`;\n}\n"]}