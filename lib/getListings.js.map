{"version":3,"sources":["getListings.js"],"names":["axios","require","get","compact","map","module","exports","endpoint","req","res","process","env","AIRTABLE_API_KEY","then","toFBMessage","JSON","stringify","msgs","end","fields","Name","name","Address","address","Phone","phone","Borough","borough","text"],"mappings":";;AAAA,MAAMA,QAAQC,QAAQ,OAAR,CAAd;AACA,MAAMC,MAAMD,QAAQ,eAAR,CAAZ;AACA,MAAME,UAAUF,QAAQ,mBAAR,CAAhB;AACA,MAAMG,MAAMH,QAAQ,eAAR,CAAZ;;AAEAI,OAAOC,OAAP,CAAeC,QAAf,GAA0B,CAACC,GAAD,EAAMC,GAAN,KAAc;AACpCT,UAAME,GAAN,CAAU,kEAAkEQ,QAAQC,GAAR,CAAYC,gBAAxF,EACKC,IADL,CACUX,IAAI,cAAJ,CADV,EAEKW,IAFL,CAEUT,IAAIU,WAAJ,CAFV,EAGKD,IAHL,CAGUV,OAHV,EAIKU,IAJL,CAIUE,KAAKC,SAJf,EAKKH,IALL,CAKUI,QAAQR,IAAIS,GAAJ,CAAQD,IAAR,CALlB;;AAOA,aAASH,WAAT,CAAqB,EAAEK,QAAQ,EAAEC,MAAMC,IAAR,EAAcC,SAASC,OAAvB,EAAgCC,OAAOC,KAAvC,EAA8CC,SAASC,OAAvD,EAAV,EAArB,EAAmG;AAC/F,YAAIA,YAAY,eAAhB,EAAgC;AAChC,mBAAO,EAACC,MAAO,GAAEP,IAAK,sBAAqBI,KAAM,EAA1C,EAAP;AACC;AACJ;AACJ,CAbD","file":"getListings.js","sourcesContent":["const axios = require('axios');\nconst get = require('lodash/fp/get');\nconst compact = require('lodash/fp/compact');\nconst map = require('lodash/fp/map');\n\nmodule.exports.endpoint = (req, res) => {\n    axios.get('https://api.airtable.com/v0/app9xzJDMtX5XYjWJ/Health?api_key=' + process.env.AIRTABLE_API_KEY)\n        .then(get('data.records'))\n        .then(map(toFBMessage))\n        .then(compact)\n        .then(JSON.stringify)\n        .then(msgs => res.end(msgs));\n\n    function toFBMessage({ fields: { Name: name, Address: address, Phone: phone, Borough: borough } }) {\n        if (borough === 'Staten Island'){\n        return {text: `${name} can be reached at ${phone}`};\n        }\n    }\n}\n"]}