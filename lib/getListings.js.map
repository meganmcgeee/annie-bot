{"version":3,"sources":["../src/getListings.js"],"names":["axios","require","get","compact","map","module","exports","endpoint","req","res","process","env","AIRTABLE_API_KEY","then","toFBMessage","JSON","stringify","end","msgs","fields","name","Name","address","Address","phone","Phone","borough","Borough","text"],"mappings":";;AAAA,IAAMA,QAAQC,QAAQ,OAAR,CAAd;AACA,IAAMC,MAAMD,QAAQ,eAAR,CAAZ;AACA,IAAME,UAAUF,QAAQ,mBAAR,CAAhB;AACA,IAAMG,MAAMH,QAAQ,eAAR,CAAZ;;AAEAI,OAAOC,OAAP,CAAeC,QAAf,GAA0B,UAACC,GAAD,EAAMC,GAAN,EAAc;AACpCT,UAAME,GAAN,CAAU,kEAAkEQ,QAAQC,GAAR,CAAYC,gBAAxF,EACKC,IADL,CACUX,IAAI,cAAJ,CADV,EAEKW,IAFL,CAEUT,IAAIU,WAAJ,CAFV,EAGKD,IAHL,CAGUV,OAHV,EAIKU,IAJL,CAIUE,KAAKC,SAJf,EAKKH,IALL,CAKU;AAAA,eAAQJ,IAAIQ,GAAJ,CAAQC,IAAR,CAAR;AAAA,KALV;;AAOA,aAASJ,WAAT,OAAmG;AAAA,+BAA5EK,MAA4E;AAAA,YAA5DC,IAA4D,eAAlEC,IAAkE;AAAA,YAA7CC,OAA6C,eAAtDC,OAAsD;AAAA,YAA7BC,KAA6B,eAApCC,KAAoC;AAAA,YAAbC,OAAa,eAAtBC,OAAsB;;AAC/F,YAAID,YAAY,eAAhB,EAAgC;AAChC,mBAAO,EAACE,MAASR,IAAT,2BAAmCI,KAApC,EAAP;AACC;AACJ;AACJ,CAbD","file":"getListings.js","sourcesContent":["const axios = require('axios');\nconst get = require('lodash/fp/get');\nconst compact = require('lodash/fp/compact');\nconst map = require('lodash/fp/map');\n\nmodule.exports.endpoint = (req, res) => {\n    axios.get('https://api.airtable.com/v0/app9xzJDMtX5XYjWJ/Health?api_key=' + process.env.AIRTABLE_API_KEY)\n        .then(get('data.records'))\n        .then(map(toFBMessage))\n        .then(compact)\n        .then(JSON.stringify)\n        .then(msgs => res.end(msgs));\n\n    function toFBMessage({ fields: { Name: name, Address: address, Phone: phone, Borough: borough } }) {\n        if (borough === 'Staten Island'){\n        return {text: `${name} can be reached at ${phone}`};\n        }\n    }\n}\n"]}